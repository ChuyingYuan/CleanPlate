<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="../favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="../favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="../favicon/favicon-16x16.png"
    />
    <link rel="icon" type="image/x-icon" href="../favicon/favicon.ico" />
    <link
      href="https://fonts.googleapis.com/css?family=Lexend"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.css"
      rel="stylesheet"
    />
    <link href="../css/styles.css" rel="stylesheet" />
    <title>Wasted Food Scale - CleanPlate</title>
  </head>
  <body class="pt-10 sm:pt-24">
    <!-- Sticky Navigation Bar -->
    <nav
      class="bg-white fixed w-full z-20 top-0 start-0 border-b border-gray-200"
    >
      <div
        class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4"
      >
        <a
          href="../html/index.html"
          class="flex items-center space-x-3 rtl:space-x-reverse"
        >
          <img src="../WEBSITE_LOGO.png" class="h-8" alt="Logo" />
          <span class="self-center text-2xl font-semibold whitespace-nowrap"
            >CleanPlate</span
          >
        </a>
        <div class="flex md:order-2 space-x-3 rtl:space-x-reverse">
          <button
            data-collapse-toggle="navbar-sticky"
            onclick="toggleMenu()"
            type="button"
            class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200"
            aria-controls="navbar-sticky"
            aria-expanded="false"
          >
            <span class="sr-only">Open main menu</span>
            <svg
              class="w-5 h-5"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 17 14"
            >
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M1 1h15M1 7h15M1 13h15"
              />
            </svg>
          </button>
        </div>
        <div
          class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1"
          id="navbar-sticky"
        >
          <ul
            class="flex flex-col p-4 md:p-0 mt-4 font-medium border border-gray-100 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-white"
          >
            <li class="relative group">
              <a
                href="../html/index.html"
                class="flex items-center space-x-2 py-2 px-3 md:p-0 nav-icon"
              >
                <img
                  src="https://img.icons8.com/?size=100&id=73&format=png&color=000000"
                  class="w-6 h-6"
                  alt="Home"
                />
                <span class="block md:hidden text-center mt-2">Home</span>
              </a>
              <div
                class="absolute left-1/2 transform -translate-x-1/2 bottom-full mb-2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-800 text-white text-xs rounded-md py-1 px-2"
              >
                Home
              </div>
            </li>
            <li class="relative group">
              <a
                href="../html/expiry-date-tracker.html"
                class="flex items-center space-x-2 py-2 px-3 md:p-0 nav-icon"
              >
                <img
                  src="https://img.icons8.com/?size=100&id=283&format=png&color=000000"
                  class="w-6 h-6"
                  alt="Expiry Tracker"
                />
                <span class="block md:hidden text-center mt-2"
                  >Expiry Tracker</span
                >
              </a>
              <div
                class="absolute left-1/2 transform -translate-x-1/2 bottom-full mb-2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-800 text-white text-xs rounded-md py-1 px-2"
              >
                Expiry Tracker
              </div>
            </li>
            <li class="relative group">
              <a
                href="../html/recipe.html"
                class="flex items-center space-x-2 py-2 px-3 md:p-0 nav-icon"
              >
                <img
                  src="https://img.icons8.com/?size=100&id=idEQE7TsG0NA&format=png&color=000000"
                  class="w-6 h-6"
                  alt="Recipe"
                />
                <span class="block md:hidden text-center mt-2">Recipe</span>
              </a>
              <div
                class="absolute left-1/2 transform -translate-x-1/2 bottom-full mb-2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-800 text-white text-xs rounded-md py-1 px-2"
              >
                Recipe Search
              </div>
            </li>
            <li class="relative group">
              <a
                href="../html/notification.html"
                class="flex items-center space-x-2 py-2 px-3 md:p-0 nav-icon"
              >
                <img
                  src="https://img.icons8.com/?size=100&id=23&format=png&color=000000"
                  class="w-6 h-6"
                  alt="Notification"
                />
                <span class="block md:hidden text-center mt-2"
                  >Notification</span
                >
              </a>
              <div
                class="absolute left-1/2 transform -translate-x-1/2 bottom-full mb-2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-800 text-white text-xs rounded-md py-1 px-2"
              >
                Notification
              </div>
            </li>
            <li class="relative group">
              <a
                href="../html/wasted-food-scale.html"
                class="flex items-center space-x-2 py-2 px-3 md:p-0 nav-icon active"
              >
                <img
                  src="https://img.icons8.com/?size=100w&id=XxG3TLBUs4k5&format=png&color=000000"
                  class="w-6 h-6"
                  alt="Wasted Food Scale"
                />
                <span class="block md:hidden text-center mt-2"
                  >Wasted Food Scale</span
                >
              </a>
              <div
                class="absolute left-1/2 transform -translate-x-1/2 bottom-full mb-2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-800 text-white text-xs rounded-md py-1 px-2"
              >
                Wasted Food Scale
              </div>
            </li>
            <li class="relative group">
              <a
                href="../html/dashboard.html"
                class="flex items-center space-x-2 py-2 px-3 md:p-0 nav-icon"
              >
                <img
                  src="https://img.icons8.com/?size=100&id=6rfR2m3WUfBr&format=png&color=000000"
                  class="w-6 h-6"
                  alt="Dashboard"
                />
                <span class="block md:hidden text-center mt-2">Dashboard</span>
              </a>
              <div
                class="absolute left-1/2 transform -translate-x-1/2 bottom-full mb-2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-800 text-white text-xs rounded-md py-1 px-2"
              >
                Dashboard
              </div>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <main class="container mx-auto mt-2 px-4 sm:px-8 flex-grow">
      <!-- Greeting -->
      <div class="mx-auto mt-10 sm:mt-16 sm:px-8">
        <div class="grid grid-cols-1 md:grid-cols-3 items-center">
          <!-- Greeting -->
          <div id="greeting-container" class="flex items-center space-x-2">
            <div id="greeting" class="page-label text-xl font-bold"></div>
          </div>
        </div>
      </div>

      <!-- Wasted Food Scale Decision Tool + Effort Tracker -->
      <div class="mt-4 sm:mt-16 sm:px-8">
        <!-- Effort Tracker + WFS Decision Tool + Visualisation-->
        <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
          <!-- Effort Tracker + Decision Tool -->
          <div class="col-span-1">
            <!-- Effort Tracker -->
            <div class="col-span-1">
              <div class="wfs-container">
                <div
                  id="effortTracker"
                  class="p-5 flex flex-col lg:flex-row justify-between items-center"
                >
                  <div id="effort-text" class="lg:w-1/2 flex flex-col">
                    <p class="text-lg font-bold">Effort Tracker</p>
                    <div class="font-normal mt-2 space-y-2">
                      <p>
                        Total Food Waste Saved:
                        <span id="totalWaste">0</span> kg
                      </p>
                      <p>
                        Estimated CO2 Reduction:
                        <span id="co2Reduction">0</span> kg
                      </p>
                      <p>Total Count: <span id="count">0</span></p>
                      <p>Total Score: <span id="score">0</span></p>
                    </div>
                  </div>

                  <!-- Gauge Section -->
                  <div class="pt-4 relative w-40 h-40">
                    <svg
                      id="gauge"
                      class="w-full h-full"
                      viewBox="0 0 36 36"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <!-- Background Arc (Full Gauge) -->
                      <path
                        d="M 5 18 a 13 13 0 0 1 26 0"
                        fill="none"
                        stroke="#e5e7eb"
                        stroke-width="2"
                      ></path>

                      <!-- Gauge Progress Arc -->
                      <path
                        id="gauge-progress"
                        d="M 5 18 a 13 13 0 0 1 26 0"
                        fill="none"
                        stroke="#119236"
                        stroke-width="2"
                        stroke-dasharray="0, 100"
                        stroke-linecap="round"
                      ></path>
                    </svg>

                    <!-- Value Text in the Center -->
                    <div
                      id="gauge-value"
                      class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center"
                    >
                      <span id="gauge-text" class="text-4xl font-bold green"
                        >0</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div id="wfs" class="wfs-container mt-8 mb-4 sm:mb-4">
              <div
                class="pt-8 justify-center flex flex-col md:flex-row gap-8 items-center"
              >
                <p class="text-xl font-bold">Decision Tool</p>
                <!-- Restart Button -->
                <div class="flex justify-center">
                  <button
                    onclick="restartTool()"
                    class="w-full lg:w-auto px-4 py-2 rounded-full border border-gray-300 text-sm font-medium button"
                  >
                    Restart
                  </button>
                </div>
              </div>

              <!-- Is the Food Still Edible? -->
              <div
                id="isEdible"
                class="p-8 justify-center flex flex-col items-center"
              >
                <p class="text-lg font-bold">Is the Food Still Edible?</p>
                <div class="font-normal mt-2 px-8 text-center">
                  <p class="text-sm">
                    Check whether the food has expired or not.
                  </p>
                  <div class="justify-center flex">
                    <button
                      onclick="window.open('notification.html', '_blank')"
                      class="w-full lg:w-auto px-4 py-2 rounded-full border border-gray-300 text-sm font-medium button mt-3 mb-3"
                    >
                      Check Here!
                    </button>
                  </div>
                  <p class="text-sm">
                    Evaluate whether the food is safe for consumption.
                    <br />Look for signs of spoilage such as mold, off odors, or
                    unusual textures. <br />If the food still looks, smells, and
                    tastes fine, it may still be edible.
                  </p>
                </div>
                <div
                  class="flex flex-row items-center justify-center space-x-8 mt-8"
                >
                  <button
                    onclick="isFoodEdible('yes')"
                    class="w-full lg:w-auto px-4 py-2 rounded-full border border-gray-300 text-sm font-medium button"
                  >
                    Yes
                  </button>
                  <button
                    onclick="isFoodEdible('no')"
                    class="w-full lg:w-auto px-4 py-2 rounded-full border border-gray-300 text-sm font-medium button"
                  >
                    No
                  </button>
                </div>
              </div>

              <!-- Plan to Consume or Donate -->
              <div
                id="planToConsume"
                class="p-8 justify-center flex flex-col items-center hidden"
              >
                <p class="text-lg font-bold">Can you consume it soon?</p>
                <div class="font-normal mt-2 px-8 text-center">
                  <p class="text-sm">
                    If the food is edible, consider whether you can use it in
                    your next meal or prepare it for upcoming days. Planning
                    your meals or freezing food can help prevent waste. If
                    you're unable to consume it soon, think about donating it to
                    those in need.
                  </p>
                </div>
                <div
                  class="flex flex-col md:flex-row items-center justify-center space-y-6 md:space-x-8 md:space-y-0 mt-8"
                >
                  <button
                    onclick="consumeOrDonate('consume')"
                    class="w-full lg:w-auto px-4 py-2 rounded-full border border-gray-300 text-sm font-medium button"
                  >
                    Yes, I will eat it soon
                  </button>
                  <button
                    onclick="consumeOrDonate('donate')"
                    class="w-full lg:w-auto px-4 py-2 rounded-full border border-gray-300 text-sm font-medium button"
                  >
                    No, I will donate it
                  </button>
                </div>
              </div>

              <!-- Is it suitable for feeding animals? -->
              <div
                id="feedAnimalsCheck"
                class="p-8 justify-center flex flex-col items-center hidden"
              >
                <p class="text-lg font-bold">
                  Is it suitable for feeding animals?
                </p>
                <div class="font-normal mt-2 px-8 text-center">
                  <p class="text-sm">
                    If the food is not fit for human consumption, check if it
                    can be repurposed as animal feed. Consider options such as
                    fruit scraps, stale bread, or leftover grains.
                  </p>
                </div>
                <div
                  class="flex flex-row items-center justify-center space-x-8 mt-8"
                >
                  <button
                    onclick="isFoodForAnimals('yes')"
                    class="w-full lg:w-auto px-4 py-2 rounded-full border border-gray-300 text-sm font-medium button"
                  >
                    Yes, feed it to animals
                  </button>
                  <button
                    onclick="isFoodForAnimals('no')"
                    class="w-full lg:w-auto px-4 py-2 rounded-full border border-gray-300 text-sm font-medium button"
                  >
                    No, not suitable for animals
                  </button>
                </div>
              </div>

              <!-- Can it be Composted? -->
              <div
                id="compostCheck"
                class="p-8 justify-center flex flex-col items-center hidden"
              >
                <p class="text-lg font-bold">Can it be composted?</p>
                <div class="font-normal mt-2 px-8 text-center">
                  <p class="text-sm">
                    If the food is no longer fit for consumption, consider
                    composting it. Composting helps reduce waste and provides
                    valuable nutrients for soil. Check if the food is suitable
                    for home or community composting, such as fruit and
                    vegetable scraps, coffee grounds, and eggshells. If it can't
                    be composted, it may need to be disposed of responsibly.
                  </p>
                </div>
                <div
                  class="flex flex-col md:flex-row items-center justify-center space-y-6 md:space-x-8 md:space-y-0 mt-8"
                >
                  <button
                    onclick="compostOrBiofuel('compost')"
                    class="w-full lg:w-auto px-4 py-2 rounded-full border border-gray-300 text-sm font-medium button"
                  >
                    Yes, compost it
                  </button>
                  <button
                    onclick="compostOrBiofuel('biofuel')"
                    class="w-full lg:w-auto px-4 py-2 rounded-full border border-gray-300 text-sm font-medium button"
                  >
                    No, check for anaerobic digestion
                  </button>
                </div>
              </div>

              <!-- Can it be used for industrial purposes, such as biofuel? -->
              <div
                id="biofuelCheck"
                class="p-8 justify-center flex flex-col items-center hidden"
              >
                <p class="text-lg font-bold">
                  Can it be used for industrial purposes, such as biofuel?
                </p>
                <div class="font-normal mt-2 px-8 text-center">
                  <p class="text-sm">
                    If the food is not suitable for composting, check if it can
                    be used for industrial purposes, like biofuel or other
                    energy production. Many food waste programs utilize this
                    approach for sustainability.
                  </p>
                </div>
                <div
                  class="flex flex-row items-center justify-center space-x-8 mt-8"
                >
                  <button
                    onclick="canUseForBiofuel('yes')"
                    class="w-full lg:w-auto px-4 py-2 rounded-full border border-gray-300 text-sm font-medium button"
                  >
                    Yes, use for anaerobic digestion
                  </button>
                  <button
                    onclick="canUseForBiofuel('no')"
                    class="w-full lg:w-auto px-4 py-2 rounded-full border border-gray-300 text-sm font-medium button"
                  >
                    No, dispose of it
                  </button>
                </div>
              </div>

              <!-- Final Decision -->
              <div
                id="finalDecision"
                class="p-8 justify-center flex flex-col items-center hidden"
              >
                <p class="text-lg font-bold">Final Decision</p>
                <div class="font-normal mt-2 px-8 text-center">
                  <p id="finalDecisionText"></p>
                </div>
              </div>

              <!-- Navigating to Related Pages -->
              <div
                id="navigating"
                class="justify-center flex flex-col items-center hidden"
              >
                <div
                  id="navigatingText"
                  class="font-normal px-8 text-center"
                ></div>
                <button
                  id="navigateButton"
                  class="w-full lg:w-auto px-4 py-2 rounded-full border border-gray-300 text-sm font-medium button mt-4 hidden"
                >
                  Proceed
                </button>
              </div>

              <!-- Input Tracker -->
              <div
                id="inputTracker"
                class="p-4 mt-2 flex flex-col justify-center items-center hidden"
              >
                <label for="wasteAmount" class="block mb-2 font-normal px-8"
                  >Amount of food (in kg):</label
                >
                <input
                  type="number"
                  id="wasteAmount"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 inline-flex w-1/2 p-2.5 mt-1"
                  min="0"
                  required
                />
                <button
                  onclick="logWaste()"
                  class="lg:w-auto px-4 py-2 rounded-full border border-gray-300 text-sm font-medium button mt-4"
                >
                  Submit
                </button>
              </div>
            </div>
          </div>

          <!-- WFS -->
          <div class="col-span-1">
            <div class="wfs-container mb-8">
              <div class="p-5 justify-center flex flex-col items-center">
                <p class="text-xl font-bold mb-5">Wasted Food Scale</p>
                <ol class="relative border-s border-green-200">
                  <li class="mb-10 ms-6">
                    <span
                      class="absolute flex items-center justify-center w-6 h-6 bg-white rounded-full -start-3 ring-8 ring-white"
                    >
                      <img
                        src="https://img.icons8.com/?size=100&id=21068&format=png&color=000000"
                        alt="Do"
                      />
                    </span>
                    <h3
                      class="flex items-center mb-1 text-lg font-semibold text-gray-900"
                    >
                      Prevent Wasted Food
                      <span
                        class="bg-green-100 text-green-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded-full ms-3"
                        >DO</span
                      >
                      <span class="px-2.5 py-0.5 rounded-full text-sm circle">
                        +5</span
                      >
                    </h3>

                    <p class="mb-4 text-base font-normal text-gray-500">
                      Produce, buy and serve only what is needed
                    </p>
                  </li>

                  <li class="mb-10 ms-6">
                    <span
                      class="absolute flex items-center justify-center w-6 h-6 bg-white rounded-full -start-3 ring-8 ring-white"
                    >
                      <img
                        src="https://img.icons8.com/?size=100&id=32639&format=png&color=000000"
                        alt="Dash"
                      />
                    </span>
                    <h3
                      class="flex items-center mb-1 text-lg font-semibold text-gray-900"
                    >
                      Donate
                      <span
                        class="px-2.5 py-0.5 ml-2 rounded-full text-sm circle"
                      >
                        +4</span
                      >
                    </h3>

                    <p class="mb-4 text-base font-normal text-gray-500">
                      Rescue and redistribute food to people
                    </p>
                  </li>

                  <li class="mb-10 ms-6">
                    <span
                      class="absolute flex items-center justify-center w-6 h-6 bg-white rounded-full -start-3 ring-8 ring-white"
                    >
                      <img
                        src="https://img.icons8.com/?size=100&id=32639&format=png&color=000000"
                        alt="Dash"
                      />
                    </span>
                    <h3
                      class="flex items-center mb-1 text-lg font-semibold text-gray-900"
                    >
                      Feed Animals
                      <span
                        class="px-2.5 py-0.5 ml-2 rounded-full text-sm circle"
                      >
                        +3</span
                      >
                    </h3>

                    <p class="mb-4 text-base font-normal text-gray-500">
                      Turn wasted food into animal feed
                    </p>
                  </li>

                  <li class="mb-10 ms-6">
                    <span
                      class="absolute flex items-center justify-center w-6 h-6 bg-white rounded-full -start-3 ring-8 ring-white"
                    >
                      <img
                        src="https://img.icons8.com/?size=100&id=32639&format=png&color=000000"
                        alt="Dash"
                      />
                    </span>
                    <h3
                      class="flex items-center mb-1 text-lg font-semibold text-gray-900"
                    >
                      Compost
                      <span
                        class="px-2.5 py-0.5 ml-2 rounded-full text-sm circle"
                      >
                        +2</span
                      >
                    </h3>

                    <p class="mb-4 text-base font-normal text-gray-500">
                      Process wasted food into a soil amendment
                    </p>
                  </li>

                  <li class="mb-10 ms-6">
                    <span
                      class="absolute flex items-center justify-center w-6 h-6 bg-white rounded-full -start-3 ring-8 ring-white"
                    >
                      <img
                        src="https://img.icons8.com/?size=100&id=32639&format=png&color=000000"
                        alt="Dash"
                      />
                    </span>
                    <h3
                      class="flex items-center mb-1 text-lg font-semibold text-gray-900"
                    >
                      Anaerobic Digestion
                      <span
                        class="px-2.5 py-0.5 ml-2 rounded-full text-sm circle"
                      >
                        +1</span
                      >
                    </h3>

                    <p class="mb-4 text-base font-normal text-gray-500">
                      Break down wasted food to create energy
                    </p>
                  </li>

                  <li class="mb-10 ms-6">
                    <span
                      class="absolute flex items-center justify-center w-6 h-6 bg-white rounded-full -start-3 ring-8 ring-white"
                    >
                      <img
                        src="https://img.icons8.com/?size=100&id=21067&format=png&color=000000"
                        alt="Don't"
                      />
                    </span>
                    <h3 class="mb-1 text-lg font-semibold text-gray-900">
                      Send Down the Drain Landfill
                      <span
                        class="bg-red-100 text-red-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded-full ms-3"
                        >DON'T</span
                      >
                    </h3>

                    <p class="text-base font-normal text-gray-500">
                      with or without energy recovery
                    </p>
                  </li>
                </ol>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer
      class="left-0 z-20 w-full p-4 bg-white border-t border-gray-200 shadow md:flex md:items-center md:justify-between"
    >
      <span class="text-sm text-gray-500 sm:text-center">
        &copy; <span id="current-year"></span> CleanPlate All Rights Reserved.
      </span>
    </footer>

    <!-- Script for importing Flowbite CSS -->
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.js"></script>
    <script src="../js/wasted-food-scale.js"></script>
    <script>
      window.onload = function () {
        updateGreeting();
        const currentYear = new Date().getFullYear();
        document.getElementById("current-year").textContent = currentYear;
      };

      function updateGreeting() {
        const currentHour = new Date().getHours();
        const greetingElement = document.getElementById("greeting");
        let greeting;
        if (currentHour < 12) {
          greeting = `
            <h1 class="page-label text-xl font-bold">
                Good Morning <img src="https://img.icons8.com/?size=100&id=648&format=png&color=000000" class="w-6 h-6 ml-2 inline-block"/>
            </h1>`;
        } else if (currentHour < 18) {
          greeting = `
            <h1 class="page-label text-xl font-bold">
                Good Afternoon <img src="https://img.icons8.com/?size=100&id=648&format=png&color=000000" class="w-6 h-6 ml-2 inline-block"/>
            </h1>`;
        } else {
          greeting = `
            <h1 class="page-label text-xl font-bold">
                Good Evening <img src="https://img.icons8.com/?size=100&id=25031&format=png&color=000000" class="w-6 h-6 ml-2 inline-block"/>
            </h1>`;
        }
        greetingElement.innerHTML = greeting;
      }
    </script>
  </body>
</html>
